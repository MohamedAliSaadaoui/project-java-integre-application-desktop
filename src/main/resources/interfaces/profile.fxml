<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.shape.Circle?>
<StackPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.example.rewear.gestionuser.app.controllers.Profile"
           style="-fx-background-color: linear-gradient(to right bottom, #c9ffbf, #ffafbd);">

    <!-- Conteneur principal avec effet d'ombre -->
    <VBox spacing="25" alignment="CENTER" maxWidth="550"
          style="-fx-background-color: white;
                 -fx-border-radius: 25;
                 -fx-background-radius: 25;">
        <effect>
            <DropShadow color="rgba(0,0,0,0.3)" radius="15" spread="0.05" />
        </effect>

        <padding>
            <Insets top="35" right="40" bottom="35" left="40"/>
        </padding>

        <!-- En-tête du profil avec image -->
        <StackPane>
            <!-- Cercle de fond pour l'image -->
            <Circle radius="55" fill="#f0f0f0" />

            <!-- Image de profil -->
            <ImageView fx:id="profileImage"
                       fitWidth="100" fitHeight="100"
                       pickOnBounds="true"
                       preserveRatio="true">
                <effect>
                    <DropShadow color="rgba(0,0,0,0.2)" radius="5" />
                </effect>
            </ImageView>

            <!-- Bouton pour changer l'image -->
            <Button fx:id="changeImageButton"
                    text="+"
                    onAction="#handleEdit"
                    style="-fx-background-color: #00c6ff;
                           -fx-text-fill: white;
                           -fx-background-radius: 50%;
                           -fx-min-width: 30px;
                           -fx-min-height: 30px;
                           -fx-font-weight: bold;">
                <StackPane.margin>
                    <Insets bottom="-40" right="-40"/>
                </StackPane.margin>
            </Button>
        </StackPane>

        <!-- Titre du profil avec style amélioré -->
        <Label text="Mon Profil"
               style="-fx-font-size: 28px;
                      -fx-font-weight: bold;
                      -fx-text-fill: #333333;
                      -fx-font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
            <effect>
                <DropShadow color="rgba(0,0,0,0.1)" radius="2" offsetY="1" />
            </effect>
        </Label>

        <!-- Séparateur avec style -->
        <Separator style="-fx-background-color: #e0e0e0; -fx-opacity: 0.6;">
            <VBox.margin>
                <Insets top="-10" bottom="-5" />
            </VBox.margin>
        </Separator>

        <!-- Informations utilisateur dans un GridPane amélioré -->
        <GridPane hgap="15" vgap="18" styleClass="user-info-grid">
            <columnConstraints>
                <ColumnConstraints halignment="RIGHT" minWidth="120" />
                <ColumnConstraints halignment="LEFT" hgrow="ALWAYS" />
            </columnConstraints>

            <!-- Styles communs pour les labels d'intitulé -->
            <Label text="Nom d'utilisateur:"
                   style="-fx-font-weight: bold; -fx-text-fill: #555555;"
                   GridPane.rowIndex="0" GridPane.columnIndex="0"/>
            <Label fx:id="usernameLabel"
                   style="-fx-font-size: 14px; -fx-text-fill: #333333;"
                   GridPane.rowIndex="0" GridPane.columnIndex="1"/>

            <Label text="Email:"
                   style="-fx-font-weight: bold; -fx-text-fill: #555555;"
                   GridPane.rowIndex="1" GridPane.columnIndex="0"/>
            <Label fx:id="emailLabel"
                   style="-fx-font-size: 14px; -fx-text-fill: #333333;"
                   GridPane.rowIndex="1" GridPane.columnIndex="1"/>

            <Label text="Téléphone:"
                   style="-fx-font-weight: bold; -fx-text-fill: #555555;"
                   GridPane.rowIndex="2" GridPane.columnIndex="0"/>
            <Label fx:id="phoneLabel"
                   style="-fx-font-size: 14px; -fx-text-fill: #333333;"
                   GridPane.rowIndex="2" GridPane.columnIndex="1"/>

            <Label text="Date de naissance:"
                   style="-fx-font-weight: bold; -fx-text-fill: #555555;"
                   GridPane.rowIndex="3" GridPane.columnIndex="0"/>
            <Label fx:id="birthDateLabel"
                   style="-fx-font-size: 14px; -fx-text-fill: #333333;"
                   GridPane.rowIndex="3" GridPane.columnIndex="1"/>

            <Label text="Adresse:"
                   style="-fx-font-weight: bold; -fx-text-fill: #555555;"
                   GridPane.rowIndex="4" GridPane.columnIndex="0"/>
            <Label fx:id="addressLabel"
                   style="-fx-font-size: 14px; -fx-text-fill: #333333;"
                   wrapText="true"
                   GridPane.rowIndex="4" GridPane.columnIndex="1"/>
        </GridPane>

        <!-- Séparateur avant les boutons -->
        <Separator style="-fx-background-color: #e0e0e0; -fx-opacity: 0.6;" />

        <!-- Boutons d'action avec style amélioré -->
        <HBox spacing="20" alignment="CENTER">
            <Button fx:id="editButton" text="Modifier"
                    onAction="#handleEdit"
                    style="-fx-background-color: #00c6ff;
                           -fx-text-fill: white;
                           -fx-background-radius: 20;
                           -fx-font-weight: bold;
                           -fx-padding: 10 20;
                           -fx-cursor: hand;">
                <effect>
                    <DropShadow color="rgba(0,0,0,0.2)" radius="5" spread="0.05" />
                </effect>
            </Button>

            <Button fx:id="deleteButton" text="Supprimer"
                    onAction="#handleDelete"
                    style="-fx-background-color: #f85032;
                           -fx-text-fill: white;
                           -fx-background-radius: 20;
                           -fx-font-weight: bold;
                           -fx-padding: 10 20;
                           -fx-cursor: hand;">
                <effect>
                    <DropShadow color="rgba(0,0,0,0.2)" radius="5" spread="0.05" />
                </effect>
            </Button>
        </HBox>

        <Button fx:id="logoutButton" text="Se déconnecter"
                onAction="#handleLogout"
                style="-fx-background-color: #333399;
                       -fx-text-fill: white;
                       -fx-background-radius: 20;
                       -fx-font-weight: bold;
                       -fx-padding: 10 25;
                       -fx-cursor: hand;">
            <effect>
                <DropShadow color="rgba(0,0,0,0.2)" radius="5" spread="0.05" />
            </effect>

            <graphic>
                <Region styleClass="logout-icon" style="-fx-shape: 'M19,3H5C3.89,3 3,3.89 3,5V9H5V5H19V19H5V15H3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10.08,15.58L11.5,17L16.5,12L11.5,7L10.08,8.41L12.67,11H3V13H12.67L10.08,15.58Z'; -fx-background-color: white; -fx-min-width: 16; -fx-min-height: 16; -fx-max-width: 16; -fx-max-height: 16;" />
            </graphic>
        </Button>
    </VBox>
</StackPane>